import{r as e,p as t,m as a,c as l,w as s,i,o as c,a as u,A as d,v as n,t as r,j as o,G as f,H as v,e as m,f as g,n as _,J as p,K as h,L as b,g as T,M as k,N as x,s as C,O as A,P as S}from"./index-p-adsUdp.js";import{W as y}from"./config.BYcWPge6.js";import{_ as E}from"./plugin-vueexport-helper.BCo6x5W8.js";const I=E({__name:"report-setting",setup(E){const I=e(!0),X=e(1),j=e("19:00"),w=e(!0),P=e(!0),q=e(!0),F=e(!1),G=e(y.bathTimeStart+":00"),H=e(y.bathTimeEnd+":00"),J=e("XXXXX"),K=e("/static/logo.png"),L=()=>{_({url:"/pages/parent/family-members/family-members"})},M=["每日","每周","每月"],N=()=>{const e={reportEnabled:I.value,reportPeriod:X.value,reportTime:j.value,pressureAlert:w.value,wearAlert:P.value,batteryAlert:q.value,offlineAlert:F.value,bathStartTime:G.value,bathEndTime:H.value};T("reportSettings",e),y.bathTimeStart=parseInt(G.value.split(":")[0]),y.bathTimeEnd=parseInt(H.value.split(":")[0])},O=e=>{I.value=e.detail.value,N()},W=e=>{X.value=e.detail.value,N()},z=e=>{j.value=e.detail.value,N()},B=e=>{w.value=e.detail.value,N()},D=e=>{P.value=e.detail.value,N()},Q=e=>{q.value=e.detail.value,N()},R=e=>{F.value=e.detail.value,N()},U=e=>{G.value=e.detail.value,N()},V=e=>{H.value=e.detail.value,N()},Y=()=>{p({title:"解绑设备",content:"确定要解绑当前设备吗？解绑后将无法接收设备数据，需要重新绑定才能使用。",confirmText:"确定解绑",cancelText:"取消",confirmColor:"#ff4d4f",success:e=>{e.confirm&&Z()}})},Z=()=>{try{k({title:"正在解绑...",mask:!0}),setTimeout(()=>{h("deviceInfo"),h("mqttConfig"),h("connectionStatus");const e=a("reportSettings");e&&(delete e.deviceId,delete e.deviceType,T("reportSettings",e)),$(),x()},1e3)}catch(e){console.error("解绑设备失败:",e),x(),C({title:"解绑失败，请重试",icon:"none",duration:2e3})}},$=()=>{C({title:"设备解绑成功",icon:"success",duration:2e3}),setTimeout(()=>{h("role"),b({url:"/pages/index/index",success:()=>{console.log("跳转至角色选择页面成功")},fail:e=>{console.error("跳转失败:",e),A({delta:999,fail:()=>{S({url:"/pages/index/index"})}})}})},2e3)},ee=()=>{p({title:"退出登录",content:"确定要退出登录吗？",confirmText:"确定",cancelText:"取消",success:e=>{e.confirm&&(h("role"),b({url:"/pages/index/index"}))}})};return t(()=>{const e=a("reportSettings");e&&(I.value=void 0===e.reportEnabled||e.reportEnabled,X.value=void 0!==e.reportPeriod?e.reportPeriod:1,j.value=e.reportTime||"19:00",w.value=void 0===e.pressureAlert||e.pressureAlert,P.value=void 0===e.wearAlert||e.wearAlert,q.value=void 0===e.batteryAlert||e.batteryAlert,F.value=void 0!==e.offlineAlert&&e.offlineAlert,G.value=e.bathStartTime||y.bathTimeStart+":00",H.value=e.bathEndTime||y.bathTimeEnd+":00",y.bathTimeStart=parseInt(G.value.split(":")[0]),y.bathTimeEnd=parseInt(H.value.split(":")[0]))}),(e,t)=>{const a=d,_=i,p=f,h=v,b=g;return c(),l(_,{class:"report-setting-page"},{default:s(()=>[u(_,{class:"page-header"},{default:s(()=>[u(_,{class:"user-info"},{default:s(()=>[u(_,{class:"avatar-container"},{default:s(()=>[u(a,{src:K.value,mode:"aspectFill",class:"user-avatar"},null,8,["src"])]),_:1}),u(_,{class:"user-details"},{default:s(()=>[n("div",{class:"user-name"},r(J.value),1)]),_:1})]),_:1})]),_:1}),u(_,{class:"settings-section"},{default:s(()=>[n("h2",{class:"section-title"},"报表接收"),u(_,{class:"setting-group"},{default:s(()=>[u(_,{class:"setting-item"},{default:s(()=>[u(_,{class:"item-left"},{default:s(()=>[n("div",{class:"item-label"},"接收报表"),n("div",{class:"item-desc"},"开启后将定期接收佩戴报表")]),_:1}),u(_,{class:"item-right"},{default:s(()=>[u(p,{checked:I.value,onChange:O,color:"#1890ff"},null,8,["checked"])]),_:1})]),_:1}),I.value?(c(),l(_,{key:0,class:"setting-item"},{default:s(()=>[u(_,{class:"item-left"},{default:s(()=>[n("div",{class:"item-label"},"报表周期"),n("div",{class:"item-desc"},"选择接收报表的频率")]),_:1}),u(_,{class:"item-right"},{default:s(()=>[u(h,{value:X.value,range:M,onChange:W},{default:s(()=>[u(_,{class:"picker-text"},{default:s(()=>[m(r(M[X.value]),1)]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})):o("",!0),I.value?(c(),l(_,{key:1,class:"setting-item"},{default:s(()=>[u(_,{class:"item-left"},{default:s(()=>[n("div",{class:"item-label"},"接收时间"),n("div",{class:"item-desc"},"选择每日报表接收时间")]),_:1}),u(_,{class:"item-right"},{default:s(()=>[u(h,{mode:"time",value:j.value,onChange:z},{default:s(()=>[u(_,{class:"picker-text"},{default:s(()=>[m(r(j.value),1)]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})):o("",!0)]),_:1})]),_:1}),u(_,{class:"settings-section"},{default:s(()=>[n("h2",{class:"section-title"},"预警通知"),u(_,{class:"setting-group"},{default:s(()=>[u(_,{class:"setting-item"},{default:s(()=>[u(_,{class:"item-left"},{default:s(()=>[n("div",{class:"item-label"},"压力异常提醒"),n("div",{class:"item-desc"},"压力值超出正常范围时提醒")]),_:1}),u(_,{class:"item-right"},{default:s(()=>[u(p,{checked:w.value,onChange:B,color:"#1890ff"},null,8,["checked"])]),_:1})]),_:1}),u(_,{class:"setting-item"},{default:s(()=>[u(_,{class:"item-left"},{default:s(()=>[n("div",{class:"item-label"},"未佩戴提醒"),n("div",{class:"item-desc"},"长时间未佩戴时提醒")]),_:1}),u(_,{class:"item-right"},{default:s(()=>[u(p,{checked:P.value,onChange:D,color:"#1890ff"},null,8,["checked"])]),_:1})]),_:1}),u(_,{class:"setting-item"},{default:s(()=>[u(_,{class:"item-left"},{default:s(()=>[n("div",{class:"item-label"},"电池低电量提醒"),n("div",{class:"item-desc"},"设备电量低于20%时提醒")]),_:1}),u(_,{class:"item-right"},{default:s(()=>[u(p,{checked:q.value,onChange:Q,color:"#1890ff"},null,8,["checked"])]),_:1})]),_:1}),u(_,{class:"setting-item"},{default:s(()=>[u(_,{class:"item-left"},{default:s(()=>[n("div",{class:"item-label"},"设备离线提醒"),n("div",{class:"item-desc"},"设备断开连接时提醒")]),_:1}),u(_,{class:"item-right"},{default:s(()=>[u(p,{checked:F.value,onChange:R,color:"#1890ff"},null,8,["checked"])]),_:1})]),_:1})]),_:1})]),_:1}),u(_,{class:"settings-section"},{default:s(()=>[n("h2",{class:"section-title"},"洗澡时段设置"),n("div",{class:"section-desc"},"设置洗澡时间，此时间段内未佩戴不会被记录为异常"),u(_,{class:"setting-group"},{default:s(()=>[u(_,{class:"setting-item"},{default:s(()=>[u(_,{class:"item-left"},{default:s(()=>[n("div",{class:"item-label"},"开始时间")]),_:1}),u(_,{class:"item-right"},{default:s(()=>[u(h,{mode:"time",value:G.value,onChange:U},{default:s(()=>[u(_,{class:"picker-text"},{default:s(()=>[m(r(G.value),1)]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),u(_,{class:"setting-item"},{default:s(()=>[u(_,{class:"item-left"},{default:s(()=>[n("div",{class:"item-label"},"结束时间")]),_:1}),u(_,{class:"item-right"},{default:s(()=>[u(h,{mode:"time",value:H.value,onChange:V},{default:s(()=>[u(_,{class:"picker-text"},{default:s(()=>[m(r(H.value),1)]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1})]),_:1}),u(_,{class:"settings-section"},{default:s(()=>[n("h2",{class:"section-title"},"家庭成员管理"),n("div",{class:"section-desc"},"管理可以接收设备数据的家庭成员"),u(_,{class:"setting-group"},{default:s(()=>[u(_,{class:"setting-item"},{default:s(()=>[u(_,{class:"item-left"},{default:s(()=>[n("div",{class:"item-label"},"管理家庭成员"),n("div",{class:"item-desc"},"点击进入家庭成员管理页面")]),_:1}),u(_,{class:"item-right"},{default:s(()=>[u(b,{class:"manage-button",onClick:L},{default:s(()=>[m("管理成员")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),u(_,{class:"settings-section"},{default:s(()=>[n("h2",{class:"section-title"},"设备管理"),n("div",{class:"section-desc"},"管理当前绑定的设备"),u(_,{class:"setting-group"},{default:s(()=>[u(_,{class:"setting-item"},{default:s(()=>[u(_,{class:"item-left"},{default:s(()=>[n("div",{class:"item-label"},"解绑设备"),n("div",{class:"item-desc"},"解绑后将无法接收设备数据")]),_:1}),u(_,{class:"item-right"},{default:s(()=>[u(b,{class:"unbind-button",onClick:Y},{default:s(()=>[m("解绑")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),u(_,{class:"logout-section"},{default:s(()=>[u(b,{class:"logout-button",onClick:ee},{default:s(()=>[m("退出登录")]),_:1})]),_:1})]),_:1})}}},[["__scopeId","data-v-b5cd1b2f"]]);export{I as default};
