import{W as t}from"./config.BYcWPge6.js";function e(e){if(!e||0===e.length)return 0;let a=0;const r=60*t.bathTimeStart,n=60*t.bathTimeEnd,o=60*t.bathDuration;let s=0;e.forEach(t=>{if(t.worn){a++;const e=60*t.hour+t.minute;e>=r&&e<n&&s++}});const h=Math.min(s,o);return parseFloat(((a-h)/60).toFixed(2))}function a(t){t||(t=new Date);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`}function r(e){const a=t.targetTime-e,r=Math.floor(a);return`${r}小时${Math.round(60*(a-r))}分钟`}function n(e){const a=[],r=e?new Date(e):new Date;for(let n=0;n<24;n++)for(let e=0;e<60;e+=30){const o=n>=t.bathTimeStart&&n<t.bathTimeEnd;let s=!o;!o&&Math.random()<.05&&(s=!1);let h=0;s&&(h=Math.floor(70*Math.random())+80,Math.random()<.05&&(h=Math.random()<.5?Math.floor(30*Math.random())+20:Math.floor(50*Math.random())+200)),a.push({hour:n,minute:e,worn:s,pressure:h,timestamp:new Date(r.getFullYear(),r.getMonth(),r.getDate(),n,e).getTime()})}return a}function o(r,o){const s=new Date(r,o,0).getDate(),h=[];for(let i=1;i<=s;i++){const s=new Date(r,o-1,i),m=n(s.toISOString().split("T")[0]),l=e(m);let u="normal";l<t.targetTime&&(u=Math.random()<.3?"reasonable":"abnormal");const g=m.filter(t=>t.worn).map(t=>t.pressure),c=g.length>0?Math.max(...g):0,f=g.length>0?Math.min(...g):0,M=g.length>0?parseFloat((g.reduce((t,e)=>t+e,0)/g.length).toFixed(2)):0;h.push({date:a(s),wearTime:l,status:u,maxPressure:c,minPressure:f,avgPressure:M})}return h}export{n as a,r as c,o as g};
