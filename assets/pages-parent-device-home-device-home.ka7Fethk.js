import{d as a,r as t,m as e,y as s,c as l,w as c,i as n,o as r,a as i,h as u,e as o,z as d,x as f,t as m,u as _,j as v,F as g,k as p,n as w}from"./index-QjOnPgAD.js";import{g as h}from"./mqtt.CLjLDTK4.js";import{c as y}from"./data-utils.CJS2CjW6.js";import{W as b}from"./config.CnoCz8Wu.js";import{_ as k}from"./plugin-vueexport-helper.BCo6x5W8.js";const x=""+new URL("image-BnR9DLky.png",import.meta.url).href,j=k(a({__name:"device-home",setup(a){const k=t(!1),j=t("worn"),I=t("00:30"),q=t(b.targetTime),C=t("21:30"),F=t([]),L=()=>{switch(j.value){case"worn":return"已佩戴";case"not-worn":return"未佩戴";case"abnormal":return"异常";default:return"未知"}},R=()=>{switch(j.value){case"worn":return"worn";case"not-worn":return"not-worn";case"abnormal":return"abnormal";default:return""}},z=()=>{w({url:"/pages/parent/realtime-monitor/realtime-monitor"})},B=()=>{w({url:"/pages/parent/daily-chart/daily-chart"})},D=()=>{w({url:"/pages/parent/report-setting/report-setting"})};let M,T;return e(()=>{k.value=h(),(()=>{F.value=[{id:1,type:"pressure",title:"压力值异常",time:"14:30"},{id:2,type:"battery",title:"电池电量低",time:"15:45"}];const a=y(.5);C.value=a})(),M=setInterval(()=>{k.value=h()},5e3),T=setInterval(()=>{const a=Math.random();j.value=a>.95?"abnormal":a>.9?"not-worn":"worn"},1e4)}),s(()=>{M&&clearInterval(M),T&&clearInterval(T)}),(a,t)=>{const e=n,s=d;return r(),l(e,{class:"device-home-page"},{default:c(()=>[i(e,{class:"page-header"},{default:c(()=>[k.value?(r(),l(e,{key:0,class:"device-status"},{default:c(()=>[i(e,{class:"status-dot connected"}),i(e,{class:"status-text"},{default:c(()=>[o("设备在线")]),_:1})]),_:1})):u("",!0)]),_:1}),i(e,{class:"device-info-section"},{default:c(()=>[i(e,{class:"device-image-container"},{default:c(()=>[i(s,{class:"device-image",src:x,mode:"aspectFit"}),i(e,{class:"device-name"},{default:c(()=>[o("第一代")]),_:1}),i(e,{class:"device-status-tag battery"},{default:c(()=>[i(e,{class:"status-dot"}),i(e,{class:"status-text"},{default:c(()=>[o("电量: 75%")]),_:1})]),_:1}),i(e,{class:"device-status-tag wear"},{default:c(()=>[i(e,{class:f(["status-dot",R()])},null,8,["class"]),i(e,{class:"status-text"},{default:c(()=>[o(m(L()),1)]),_:1})]),_:1})]),_:1})]),_:1}),i(e,{class:"device-overview"},{default:c(()=>[i(e,{class:"wear-status-card"},{default:c(()=>[i(e,{class:"card-title"},{default:c(()=>[o("佩戴状态")]),_:1}),i(e,{class:"status-content"},{default:c(()=>[i(e,{class:f(["status-icon",R()])},null,8,["class"]),i(e,{class:"status-text"},{default:c(()=>[o(m(L()),1)]),_:1})]),_:1}),"abnormal"===j.value?(r(),l(e,{key:0,class:"wear-alert"},{default:c(()=>[o("请尝试勒紧束带")]),_:1})):u("",!0)]),_:1}),i(e,{class:"time-card"},{default:c(()=>[i(e,{class:"card-title"},{default:c(()=>[o("佩戴时长")]),_:1}),i(e,{class:"time-content"},{default:c(()=>[i(e,{class:"current-time"},{default:c(()=>[o(m(I.value),1)]),_:1}),i(e,{class:"total-required"},{default:c(()=>[o(m(q.value)+"小时/天",1)]),_:1})]),_:1})]),_:1}),i(e,{class:"remaining-card"},{default:c(()=>[i(e,{class:"card-title"},{default:c(()=>[o("剩余时长")]),_:1}),i(e,{class:"remaining-content"},{default:c(()=>[i(e,{class:"remaining-time"},{default:c(()=>[o(m(C.value),1)]),_:1}),i(e,{class:"time-unit"},{default:c(()=>[o("小时")]),_:1})]),_:1})]),_:1})]),_:1}),i(e,{class:"warning-section"},{default:c(()=>[_("h2",{class:"section-title"},"预警信息"),F.value.length>0?(r(),l(e,{key:0,class:"warning-list"},{default:c(()=>[(r(!0),v(g,null,p(F.value,a=>(r(),l(e,{key:a.id,class:f(["warning-item",a.type])},{default:c(()=>[i(e,{class:"warning-icon"}),i(e,{class:"warning-content"},{default:c(()=>[i(e,{class:"warning-title"},{default:c(()=>[o(m(a.title),1)]),_:2},1024),i(e,{class:"warning-time"},{default:c(()=>[o(m(a.time),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})):(r(),l(e,{key:1,class:"no-warning"},{default:c(()=>[o(" 暂无预警信息 ")]),_:1}))]),_:1}),i(e,{class:"quick-actions"},{default:c(()=>[i(e,{class:"action-button",onClick:z},{default:c(()=>[i(e,{class:"action-icon realtime"}),i(e,{class:"action-text"},{default:c(()=>[o("实时监测")]),_:1})]),_:1}),i(e,{class:"action-button",onClick:B},{default:c(()=>[i(e,{class:"action-icon chart"}),i(e,{class:"action-text"},{default:c(()=>[o("每日图表")]),_:1})]),_:1}),i(e,{class:"action-button",onClick:D},{default:c(()=>[i(e,{class:"action-icon setting"}),i(e,{class:"action-text"},{default:c(()=>[o("报表设置")]),_:1})]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-578763d2"]]);export{j as default};
