import{r as e,p as a,m as s,s as t,O as l,c as i,w as o,i as c,o as n,a as d,v as u,b as r,e as m,t as f,I as v,H as _,f as p,M as b,g,K as h,N as I,L as w}from"./index-p-adsUdp.js";import{_ as x}from"./plugin-vueexport-helper.BCo6x5W8.js";const D=x({__name:"bind-device-info",setup(x){const D=e(""),S=e(0),T=["本人","子女","父母","其他"],V=e({deviceId:"",deviceType:"",firmwareVersion:"",deviceName:""});a(()=>{const e=s("tempDeviceInfo");e?V.value=e:t({title:"设备信息丢失",icon:"none",duration:2e3,success:()=>{setTimeout(()=>{l()},2e3)}})});const C=e=>{S.value=e.detail.value},N=()=>{D.value.trim()?(b({title:"正在绑定...",mask:!0}),setTimeout(()=>{try{const e={...V.value,bindingName:D.value.trim(),relationship:T[S.value],bindTime:(new Date).toISOString()};g("deviceInfo",e);const a={clientId:"client_"+Date.now(),host:"mqtt.example.com",port:8083,username:"user_"+V.value.deviceId,password:"password_"+Math.random().toString(36).substr(2,9)};g("mqttConfig",a),g("connectionStatus",{connected:!0,lastConnectTime:(new Date).toISOString()}),h("tempDeviceInfo"),I(),t({title:"设备绑定成功",icon:"success",duration:2e3,success:()=>{setTimeout(()=>{w({url:"/pages/parent/device-home/device-home"})},2e3)}})}catch(e){console.error("绑定设备失败:",e),I(),t({title:"绑定失败，请重试",icon:"none",duration:2e3})}},1500)):t({title:"请输入绑定人姓名",icon:"none",duration:2e3})};return(e,a)=>{const s=r,t=c,l=v,b=_,g=p;return n(),i(t,{class:"bind-device-info-page"},{default:o(()=>[d(t,{class:"device-info-section"},{default:o(()=>[u("h2",{class:"section-title"},"设备信息"),d(t,{class:"device-details"},{default:o(()=>[d(t,{class:"detail-item"},{default:o(()=>[d(s,{class:"label"},{default:o(()=>[m("设备名称：")]),_:1}),d(s,{class:"value"},{default:o(()=>[m(f(V.value.deviceName),1)]),_:1})]),_:1}),d(t,{class:"detail-item"},{default:o(()=>[d(s,{class:"label"},{default:o(()=>[m("设备ID：")]),_:1}),d(s,{class:"value"},{default:o(()=>[m(f(V.value.deviceId),1)]),_:1})]),_:1}),d(t,{class:"detail-item"},{default:o(()=>[d(s,{class:"label"},{default:o(()=>[m("固件版本：")]),_:1}),d(s,{class:"value"},{default:o(()=>[m(f(V.value.firmwareVersion),1)]),_:1})]),_:1})]),_:1})]),_:1}),d(t,{class:"user-info-section"},{default:o(()=>[u("h2",{class:"section-title"},"绑定人信息"),d(t,{class:"form-group"},{default:o(()=>[d(t,{class:"form-item"},{default:o(()=>[d(s,{class:"form-label"},{default:o(()=>[m("绑定人姓名")]),_:1}),d(l,{modelValue:D.value,"onUpdate:modelValue":a[0]||(a[0]=e=>D.value=e),type:"text",placeholder:"请输入绑定人姓名",class:"form-input",maxlength:"20"},null,8,["modelValue"])]),_:1}),d(t,{class:"form-item"},{default:o(()=>[d(s,{class:"form-label"},{default:o(()=>[m("与设备使用者关系")]),_:1}),d(b,{value:S.value,range:T,onChange:C},{default:o(()=>[d(t,{class:"picker-text"},{default:o(()=>[m(f(T[S.value]),1)]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),d(t,{class:"bind-section"},{default:o(()=>[d(g,{class:"bind-button",onClick:N,disabled:!D.value.trim()},{default:o(()=>[m(" 完成绑定 ")]),_:1},8,["disabled"])]),_:1})]),_:1})}}},[["__scopeId","data-v-d3d3a0f0"]]);export{D as default};
