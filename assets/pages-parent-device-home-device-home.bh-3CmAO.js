import{d as a,r as t,p as e,z as s,c as l,w as c,m as n,i as r,o as i,a as u,j as o,b as d,e as f,t as m,A as _,y as v,v as g,k as p,F as w,l as h,n as y}from"./index-p-adsUdp.js";import{g as b}from"./mqtt.BVODDdHa.js";import{c as k}from"./data-utils.CYepGN39.js";import{W as x}from"./config.BYcWPge6.js";import{_ as j}from"./plugin-vueexport-helper.BCo6x5W8.js";const I=""+new URL("image-BnR9DLky.png",import.meta.url).href,q=j(a({__name:"device-home",setup(a){const j=t(!1),q=t("worn"),C=t("00:30"),D=t(x.targetTime),F=t("21:30"),L=t([]),M=t({name:"小明",phone:"13166666666"}),R=()=>{switch(q.value){case"worn":return"已佩戴";case"not-worn":return"未佩戴";case"abnormal":return"异常";default:return"未知"}},z=()=>{switch(q.value){case"worn":return"worn";case"not-worn":return"not-worn";case"abnormal":return"abnormal";default:return""}},A=()=>{y({url:"/pages/parent/realtime-monitor/realtime-monitor"})},B=()=>{y({url:"/pages/parent/daily-chart/daily-chart"})},J=()=>{y({url:"/pages/parent/report-setting/report-setting"})};let N,O;return e(()=>{(()=>{const a=n("familyMembers");if(a&&a.length>0){const t=JSON.parse(a).find(a=>a.isDefault);t&&(M.value=t)}})(),j.value=b(),(()=>{L.value=[{id:1,type:"pressure",title:"压力值异常",time:"14:30"},{id:2,type:"battery",title:"电池电量低",time:"15:45"}];const a=k(.5);F.value=a})(),N=setInterval(()=>{j.value=b()},5e3),O=setInterval(()=>{const a=Math.random();q.value=a>.95?"abnormal":a>.9?"not-worn":"worn"},1e4)}),s(()=>{N&&clearInterval(N),O&&clearInterval(O)}),(a,t)=>{const e=d,s=r,n=_;return i(),l(s,{class:"device-home-page"},{default:c(()=>[u(s,{class:"page-header"},{default:c(()=>[u(s,{class:"device-holder"},{default:c(()=>[u(e,{class:"holder-label"},{default:c(()=>[f("当前持有人：")]),_:1}),u(e,{class:"holder-name"},{default:c(()=>[f(m(M.value.name),1)]),_:1})]),_:1}),j.value?(i(),l(s,{key:0,class:"device-status"},{default:c(()=>[u(s,{class:"status-dot connected"}),u(s,{class:"status-text"},{default:c(()=>[f("设备在线")]),_:1})]),_:1})):o("",!0)]),_:1}),u(s,{class:"device-info-section"},{default:c(()=>[u(s,{class:"device-image-container"},{default:c(()=>[u(n,{class:"device-image",src:I,mode:"aspectFit"}),u(s,{class:"device-name"},{default:c(()=>[f("第一代")]),_:1}),u(s,{class:"device-status-tag battery"},{default:c(()=>[u(s,{class:"status-dot"}),u(s,{class:"status-text"},{default:c(()=>[f("电量: 75%")]),_:1})]),_:1}),u(s,{class:"device-status-tag wear"},{default:c(()=>[u(s,{class:v(["status-dot",z()])},null,8,["class"]),u(s,{class:"status-text"},{default:c(()=>[f(m(R()),1)]),_:1})]),_:1})]),_:1})]),_:1}),u(s,{class:"device-overview"},{default:c(()=>[u(s,{class:"wear-status-card"},{default:c(()=>[u(s,{class:"card-title"},{default:c(()=>[f("佩戴状态")]),_:1}),u(s,{class:"status-content"},{default:c(()=>[u(s,{class:v(["status-icon",z()])},null,8,["class"]),u(s,{class:"status-text"},{default:c(()=>[f(m(R()),1)]),_:1})]),_:1}),"abnormal"===q.value?(i(),l(s,{key:0,class:"wear-alert"},{default:c(()=>[f("请尝试勒紧束带")]),_:1})):o("",!0)]),_:1}),u(s,{class:"time-card"},{default:c(()=>[u(s,{class:"card-title"},{default:c(()=>[f("佩戴时长")]),_:1}),u(s,{class:"time-content"},{default:c(()=>[u(s,{class:"current-time"},{default:c(()=>[f(m(C.value),1)]),_:1}),u(s,{class:"total-required"},{default:c(()=>[f(m(D.value)+"小时/天",1)]),_:1})]),_:1})]),_:1}),u(s,{class:"remaining-card"},{default:c(()=>[u(s,{class:"card-title"},{default:c(()=>[f("剩余时长")]),_:1}),u(s,{class:"remaining-content"},{default:c(()=>[u(s,{class:"remaining-time"},{default:c(()=>[f(m(F.value),1)]),_:1}),u(s,{class:"time-unit"},{default:c(()=>[f("小时")]),_:1})]),_:1})]),_:1})]),_:1}),u(s,{class:"warning-section"},{default:c(()=>[g("h2",{class:"section-title"},"预警信息"),L.value.length>0?(i(),l(s,{key:0,class:"warning-list"},{default:c(()=>[(i(!0),p(w,null,h(L.value,a=>(i(),l(s,{key:a.id,class:v(["warning-item",a.type])},{default:c(()=>[u(s,{class:"warning-icon"}),u(s,{class:"warning-content"},{default:c(()=>[u(s,{class:"warning-title"},{default:c(()=>[f(m(a.title),1)]),_:2},1024),u(s,{class:"warning-time"},{default:c(()=>[f(m(a.time),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})):(i(),l(s,{key:1,class:"no-warning"},{default:c(()=>[f(" 暂无预警信息 ")]),_:1}))]),_:1}),u(s,{class:"quick-actions"},{default:c(()=>[u(s,{class:"action-button",onClick:A},{default:c(()=>[u(s,{class:"action-icon realtime"}),u(s,{class:"action-text"},{default:c(()=>[f("实时监测")]),_:1})]),_:1}),u(s,{class:"action-button",onClick:B},{default:c(()=>[u(s,{class:"action-icon chart"}),u(s,{class:"action-text"},{default:c(()=>[f("每日图表")]),_:1})]),_:1}),u(s,{class:"action-button",onClick:J},{default:c(()=>[u(s,{class:"action-icon setting"}),u(s,{class:"action-text"},{default:c(()=>[f("设置")]),_:1})]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-c54af7fd"]]);export{q as default};
